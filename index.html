<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä –¥–ª—è 4-–ê</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            transition: all 0.5s ease;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .screen {
            background: white;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 500px;
            width: 100%;
            display: none;
        }

        #mainScreen {
            display: block;
        }

        .greeting {
            color: #fd79a8;
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .player-name {
            color: #74b9ff;
            font-size: 1.8em;
            margin-bottom: 15px;
            font-weight: bold;
        }

        h1 {
            color: #2d3436;
            margin-bottom: 20px;
            font-size: 2.2em;
        }

        h2 {
            color: #636e72;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .btn {
            background: linear-gradient(45deg, #fd79a8, #e17055);
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-weight: bold;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        /* –ö–ù–û–ü–ö–ò –í–ò–ë–û–†–£ –ö–Ü–õ–¨–ö–û–°–¢–Ü –ü–ò–¢–ê–ù–¨ */
        .question-count-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .count-btn {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            padding: 15px 5px;
            font-size: 1em;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .count-btn:hover {
            transform: scale(1.05);
        }

        .count-btn.selected {
            background: linear-gradient(45deg, #00b894, #00a085);
            border: 3px solid #fd79a8;
            transform: scale(1.05);
        }

        /* –Ü–ù–®–Ü –°–¢–ò–õ–Ü */
        .operation-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .operation-btn {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            padding: 20px;
            font-size: 1.5em;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .operation-btn:hover {
            transform: scale(1.05);
        }

        .number-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .number-btn {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            padding: 20px;
            font-size: 1.5em;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .number-btn:hover {
            transform: scale(1.05);
        }

        .avatar-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .avatar-btn {
            background: #dfe6e9;
            border: none;
            padding: 20px;
            font-size: 2em;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .avatar-btn:hover {
            transform: scale(1.05);
        }

        .avatar-btn.selected {
            border: 4px solid #fd79a8;
            transform: scale(1.1);
        }

        .name-input {
            padding: 12px;
            font-size: 1.2em;
            border: 2px solid #b2bec3;
            border-radius: 10px;
            margin: 10px 0;
            width: 100%;
            text-align: center;
        }

        .cover-image {
            width: 180px;
            height: 180px;
            margin: 20px auto;
            background: linear-gradient(45deg, #ffeaa7, #fab1a0);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em;
            border: 8px solid #fd79a8;
            cursor: pointer;
        }

        .timer {
            background: linear-gradient(45deg, #e17055, #d63031);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            margin: 10px 0;
            font-size: 1.1em;
            display: inline-block;
        }

        .progress {
            background: linear-gradient(45deg, #00b894, #00a085);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            margin: 15px 0;
            font-size: 1.1em;
            display: inline-block;
        }

        .question {
            background: linear-gradient(45deg, #ffeaa7, #fdcb6e);
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            font-size: 1.8em;
            color: #2d3436;
        }

        .answers {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .answer-btn {
            background: linear-gradient(45deg, #a29bfe, #6c5ce7);
            color: white;
            border: none;
            padding: 20px;
            font-size: 1.3em;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .answer-btn:hover {
            transform: scale(1.05);
        }

        .back-btn {
            background: linear-gradient(45deg, #636e72, #2d3436);
            margin-top: 15px;
        }

        .correct {
            background: linear-gradient(45deg, #00b894, #00a085) !important;
        }

        .wrong {
            background: linear-gradient(45deg, #d63031, #c23616) !important;
        }
    </style>
</head>
<body>
    <!-- –ì–û–õ–û–í–ù–ò–ô –ï–ö–†–ê–ù -->
    <div id="mainScreen" class="screen">
        <div class="greeting">–ü—Ä–∏–≤—ñ—Ç, 4-–ê! ‚ú®</div>
        <div class="player-name" id="playerNameDisplay">–ì—Ä–∞–≤–µ—Ü—å</div>
        <h1>–ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä</h1>
        <div class="cover-image" onclick="showCustomization()" id="mainAvatar">üê±</div>
        <button class="btn" onclick="showOperationSelection()">–ü–û–ß–ê–¢–ò –ì–†–£</button>
        <button class="btn" onclick="showCustomization()">–ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø</button>
    </div>

    <!-- –ï–ö–†–ê–ù –ù–ê–õ–ê–®–¢–£–í–ê–ù–¨ -->
    <div id="customizationScreen" class="screen">
        <div class="greeting">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</div>
        
        <h2>–ù–∞–ø–∏—à–∏ —Å–≤–æ—î —ñ–º'—è</h2>
        <input type="text" class="name-input" id="playerName" placeholder="–í–≤–µ–¥–∏ —Å–≤–æ—î —ñ–º'—è" maxlength="15">
        
        <h2>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç–∞–Ω—å</h2>
        <div class="question-count-buttons">
            <button class="count-btn" onclick="selectQuestionCount(10)">10 –∑–∞–ø–∏—Ç–∞–Ω—å</button>
            <button class="count-btn" onclick="selectQuestionCount(20)">20 –∑–∞–ø–∏—Ç–∞–Ω—å</button>
            <button class="count-btn" onclick="selectQuestionCount(30)">30 –∑–∞–ø–∏—Ç–∞–Ω—å</button>
        </div>

        <h2>–û–±–µ—Ä–∏ —Ç–∞–ª—ñ—Å–º–∞–Ω–∞</h2>
        <div class="avatar-buttons">
            <button class="avatar-btn" onclick="selectAvatar('üê±')">üê±</button>
            <button class="avatar-btn" onclick="selectAvatar('üê∂')">üê∂</button>
            <button class="avatar-btn" onclick="selectAvatar('üê∞')">üê∞</button>
            <button class="avatar-btn" onclick="selectAvatar('üêº')">üêº</button>
            <button class="avatar-btn" onclick="selectAvatar('üêØ')">üêØ</button>
            <button class="avatar-btn" onclick="selectAvatar('üê®')">üê®</button>
        </div>

        <button class="btn back-btn" onclick="showMainScreen()">–ì–æ—Ç–æ–≤–æ</button>
    </div>

    <!-- –ï–ö–†–ê–ù –í–ò–ë–û–†–£ –û–ü–ï–†–ê–¶–Ü–á -->
    <div id="operationScreen" class="screen">
        <div class="greeting" id="operationGreeting">–ü—Ä–∏–≤—ñ—Ç, –ì—Ä–∞–≤–µ—Ü—å! ‚ú®</div>
        <h1>–û–±–µ—Ä–∏ –¥—ñ—é</h1>
        <div class="operation-buttons">
            <button class="operation-btn" onclick="showNumberSelection('multiplication')">–ú–Ω–æ–∂–µ–Ω–Ω—è<br>√ó</button>
            <button class="operation-btn" onclick="showNumberSelection('division')">–î—ñ–ª–µ–Ω–Ω—è<br>√∑</button>
        </div>
        <button class="btn back-btn" onclick="showMainScreen()">–ù–∞–∑–∞–¥</button>
    </div>

    <!-- –ï–ö–†–ê–ù –í–ò–ë–û–†–£ –ß–ò–°–õ–ê -->
    <div id="numberScreen" class="screen">
        <div class="greeting" id="numberGreeting">–ü—Ä–∏–≤—ñ—Ç, –ì—Ä–∞–≤–µ—Ü—å! ‚ú®</div>
        <h1 id="numberScreenTitle">–û–±–µ—Ä–∏ —á–∏—Å–ª–æ</h1>
        <div class="number-buttons" id="numberButtons"></div>
        <button class="btn back-btn" onclick="showOperationSelection()">–ù–∞–∑–∞–¥</button>
    </div>

    <!-- –ï–ö–†–ê–ù –ì–†–ò -->
    <div id="gameScreen" class="screen">
        <div class="greeting" id="gameGreeting">–ü—Ä–∏–≤—ñ—Ç, –ì—Ä–∞–≤–µ—Ü—å! ‚ú®</div>
        <div class="timer" id="timer">‚è±Ô∏è 60—Å</div>
        <div class="progress" id="progress">–ü–∏—Ç–∞–Ω–Ω—è: 1/10</div>
        <div class="question" id="question">3 √ó 9 = ?</div>
        <div class="answers" id="answers"></div>
        <button class="btn back-btn" onclick="showOperationSelection()">–ù–∞–∑–∞–¥</button>
    </div>

    <script>
        // –ì–õ–û–ë–ê–õ–¨–ù–Ü –ó–ú–Ü–ù–ù–Ü
        let currentNumber = 0;
        let currentQuestion = 0;
        let totalQuestions = 10;
        let score = 0;
        let currentOperation = '';
        let playerName = '4-–ê';
        let playerAvatar = 'üê±';
        let timer;
        let timeLeft = 60;

        // –§–£–ù–ö–¶–Ü–á –î–õ–Ø –ö–ù–û–ü–û–ö
        function selectQuestionCount(count) {
            console.log("–í–∏–±—Ä–∞–Ω–æ –ø–∏—Ç–∞–Ω—å:", count);
            totalQuestions = count;
            timeLeft = count * 6; // 6 —Å–µ–∫—É–Ω–¥ –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –≤–∏–≥–ª—è–¥ –∫–Ω–æ–ø–æ–∫
            const buttons = document.querySelectorAll('.count-btn');
            buttons.forEach(btn => {
                btn.classList.remove('selected');
                if (btn.textContent.includes(count)) {
                    btn.classList.add('selected');
                }
            });
            
            alert(`–û–±—Ä–∞–Ω–æ ${count} –∑–∞–ø–∏—Ç–∞–Ω—å! –ß–∞—Å: ${timeLeft} —Å–µ–∫—É–Ω–¥`);
        }

        function selectAvatar(avatar) {
            console.log("–í–∏–±—Ä–∞–Ω–æ –∞–≤–∞—Ç–∞—Ä:", avatar);
            playerAvatar = avatar;
            
            const buttons = document.querySelectorAll('.avatar-btn');
            buttons.forEach(btn => {
                btn.classList.remove('selected');
                if (btn.textContent === avatar) {
                    btn.classList.add('selected');
                }
            });
            
            document.getElementById('mainAvatar').textContent = avatar;
        }

        function updatePlayerName() {
            const name = document.getElementById('playerName').value || '4-–ê';
            playerName = name;
            document.getElementById('playerNameDisplay').textContent = name;
        }

        // –û–°–ù–û–í–ù–Ü –§–£–ù–ö–¶–Ü–á –ì–†–ò
        function showMainScreen() {
            hideAllScreens();
            document.getElementById('mainScreen').style.display = 'block';
        }

        function showCustomization() {
            hideAllScreens();
            document.getElementById('customizationScreen').style.display = 'block';
            document.getElementById('playerName').value = playerName;
        }

        function showOperationSelection() {
            hideAllScreens();
            document.getElementById('operationScreen').style.display = 'block';
            updatePlayerName();
        }

        function showNumberSelection(operation) {
            currentOperation = operation;
            hideAllScreens();
            document.getElementById('numberScreen').style.display = 'block';
            
            const title = operation === 'multiplication' ? '–º–Ω–æ–∂–µ–Ω–Ω—è' : '–¥—ñ–ª–µ–Ω–Ω—è';
            document.getElementById('numberScreenTitle').textContent = `–û–±–µ—Ä–∏ —á–∏—Å–ª–æ –¥–ª—è ${title}`;
            
            createNumberButtons();
        }

        function createNumberButtons() {
            const container = document.getElementById('numberButtons');
            container.innerHTML = '';
            
            for (let i = 1; i <= 9; i++) {
                const button = document.createElement('button');
                button.className = 'number-btn';
                button.textContent = currentOperation === 'multiplication' ? i + ' √ó' : i + ' √∑';
                button.onclick = function() { 
                    console.log("–û–±—Ä–∞–Ω–æ —á–∏—Å–ª–æ:", i);
                    startGame(i); 
                };
                container.appendChild(button);
            }
        }

        function startGame(number) {
            console.log("–ü–æ—á–∞—Ç–æ–∫ –≥—Ä–∏ –∑ —á–∏—Å–ª–æ–º:", number);
            currentNumber = number;
            currentQuestion = 0;
            score = 0;
            
            hideAllScreens();
            document.getElementById('gameScreen').style.display = 'block';
            
            document.getElementById('progress').textContent = `–ü–∏—Ç–∞–Ω–Ω—è: 1/${totalQuestions}`;
            document.getElementById('timer').textContent = `‚è±Ô∏è ${timeLeft}—Å`;
            
            startTimer();
            generateQuestion();
        }

        function generateQuestion() {
            if (currentQuestion >= totalQuestions) {
                endGame();
                return;
            }
            
            currentQuestion++;
            document.getElementById('progress').textContent = `–ü–∏—Ç–∞–Ω–Ω—è: ${currentQuestion}/${totalQuestions}`;
            
            let questionText, correctAnswer;
            
            if (currentOperation === 'multiplication') {
                const randomMultiplier = Math.floor(Math.random() * 10) + 1;
                correctAnswer = currentNumber * randomMultiplier;
                questionText = `${currentNumber} √ó ${randomMultiplier} = ?`;
            } else {
                const randomMultiplier = Math.floor(Math.random() * 10) + 1;
                const dividend = currentNumber * randomMultiplier;
                correctAnswer = randomMultiplier;
                questionText = `${dividend} √∑ ${currentNumber} = ?`;
            }
            
            document.getElementById('question').textContent = questionText;
            generateAnswers(correctAnswer);
        }

        function generateAnswers(correctAnswer) {
            const container = document.getElementById('answers');
            container.innerHTML = '';
            
            const answers = [correctAnswer];
            
            // –î–æ–¥–∞—î–º–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
            while (answers.length < 4) {
                let wrongAnswer;
                if (Math.random() > 0.5) {
                    wrongAnswer = correctAnswer + (Math.random() > 0.5 ? 1 : -1) * (Math.floor(Math.random() * 3) + 1);
                } else {
                    wrongAnswer = Math.floor(Math.random() * 100) + 1;
                }
                
                if (wrongAnswer > 0 && wrongAnswer !== correctAnswer && !answers.includes(wrongAnswer)) {
                    answers.push(wrongAnswer);
                }
            }
            
            // –ü–µ—Ä–µ–º—ñ—à—É—î–º–æ
            for (let i = answers.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [answers[i], answers[j]] = [answers[j], answers[i]];
            }
            
            // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–Ω–æ–ø–∫–∏
            answers.forEach(answer => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = answer;
                button.onclick = function() {
                    checkAnswer(answer, correctAnswer, button);
                };
                container.appendChild(button);
            });
        }

        function checkAnswer(selected, correct, button) {
            const allButtons = document.querySelectorAll('.answer-btn');
            
            allButtons.forEach(btn => {
                btn.disabled = true;
                if (parseInt(btn.textContent) === correct) {
                    btn.classList.add('correct');
                }
            });
            
            if (selected !== correct) {
                button.classList.add('wrong');
                timeLeft = Math.max(5, timeLeft - 4); // -4 —Å–µ–∫—É–Ω–¥–∏
            } else {
                score++;
                timeLeft = Math.min(totalQuestions * 6, timeLeft + 3); // +3 —Å–µ–∫—É–Ω–¥–∏
            }
            
            setTimeout(() => {
                generateQuestion();
            }, 1500);
        }

        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = `‚è±Ô∏è ${timeLeft}—Å`;
                
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function endGame() {
            clearInterval(timer);
            alert(`–ì—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!\n–¢–≤—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score}/${totalQuestions}`);
            showOperationSelection();
        }

        function hideAllScreens() {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.style.display = 'none';
            });
        }

        // –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø
        window.onload = function() {
            console.log("–ì—Ä–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∞!");
            // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –≤–∏–±—ñ—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
            selectQuestionCount(10);
            selectAvatar('üê±');
        };
    </script>
</body>
</html>
